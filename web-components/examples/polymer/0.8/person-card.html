<script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/rollups/md5.js"></script>

<dom-module id="person-card">
    <style>
        :host h3 {
            color: black;
        }

        #person-card .lastName {
            text-decoration: underline
        }
    </style>

    <style>
        @import 'https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css';
    </style>

    <template>
        <div id="person-card">
            <img id="gravatar" src="{{gravatar}}"
                 alt="{{gravatarAlt}}">
            <h2>
                <span class="firstName">{{firstName}}</span> <span class="lastName">{{lastName}}</span>
            </h2>
            <h3>
                <span>{{position}}</span> @ <span>{{company}}</span>
            </h3>
            <a href="{{twitterUrl}}" target="_blank">@<span>{{twitter}}</span></a>
        </div>
    </template>
</dom-module>

<script>
    Polymer({
        is: 'person-card',
        properties: {
            twitter: String,
            email: String,
            firstName: String,
            lastName: String,
            position: String,
            company: String,
            fullName: {
                computed: 'firstName + " " + lastName'
            },
            gravatar: {
                computed: 'gravatarUrl(email)'
            },
            twitterUrl: {
                computed: 'computeTwitterUrl(twitter)'
            },
            gravatarAlt: {
                computed: 'computeGravatarAlt(fullName)'
            }
        },
        hash: function (email) {
            return CryptoJS.MD5(email);
        },
        gravatarUrl: function(email){
            return 'http://www.gravatar.com/avatar/' + this.hash(email);
        },
        computeTwitterUrl: function(twitter){
            return "http://twitter.com/" + twitter;
        },
        computeGravatarAlt: function(fullName){
            return "Gravatar of " + fullName;
        }
    });
</script>